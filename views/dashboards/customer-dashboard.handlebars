<main>
    <section id="service-requests">
        <h2>Your Service Requests</h2>
        <table>
            <thead>
                <tr>
                    <th>Device</th>
                    <th>Repair Type</th>
                    <th>Price</th>
                    <th>Date Created</th>
                    <th>Delivery/Completion Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {{#each serviceRequests}}
                <tr class="{{#if isCompleted}}completed-request{{else}}current-request{{/if}}">
                    <td>{{deviceType}} {{deviceModel}}</td>
                    <td>{{repairType}}</td>
                    <td>${{associatedPrice}}</td>
                    <td>{{formatDate createdAt}}</td>
                    <td>
                        {{#if isCompleted}}
                        {{formatDate completedAt}}
                        {{else}}
                        {{formatDate expectedDelivery}}
                        {{/if}}
                    </td>
                    <td>{{capitalize status}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </section>

    <section id="get-quotation-form" class="hidden">
        <h2>New Service Request</h2>
        <form id="getQuotationForm" action="/service-requests" method="POST" novalidate>


            <label for="deviceType">Device Type:</label>
            <select id="deviceType" name="deviceType" required>
                <option value="" disabled selected>Select a device type</option>
            </select>

            <label for="deviceModel">Device Model:</label>
            <select id="deviceModel" name="deviceModel" required>
                <option value="" disabled selected>Select a device model</option>
            </select>

            <label for="repairType">Repair Type:</label>
            <select id="repairType" name="repairType" required>
                <option value="" disabled selected>Select a repair type</option>
            </select>

            {{!-- <label for="priority">Priority:</label>
            <select id="priority" name="priority">
                <option value="regular">Regular</option>
                <option value="fast service">Fast Service</option>
            </select> --}}

            {{!-- <label for="comments">Comments:</label>
            <textarea id="comments" name="comments"></textarea> --}}

            <button type="submit">Get Quotation</button>
        </form>
    </section>


    <!-- Quotation Display Section (Dynamically filled after form submission) -->
    <section id="quotation-display" class="hidden">
        <h2>Quotation Details</h2>
        <table>
            <tr>
                <th>Device Type</th>
                <td id="quote-deviceType"></td>
            </tr>
            <tr>
                <th>Device Model</th>
                <td id="quote-deviceModel"></td>
            </tr>
            <tr>
                <th>Repair Name</th>
                <td id="quote-repairName"></td>
            </tr>
            <tr>
                <th>Defective Parts</th>
                <td id="quote-defectiveParts"></td>
            </tr>
            <tr>
                <th>Price</th>
                <td id="quote-price"></td>
            </tr>
            <tr>
                <th>Estimated Time in Hours</th>
                <td id="quote-estimatedTime"></td>
            </tr>
        </table>

        <!-- Select Store for Order Placement -->
        <label for="storeSelect">Select Store:</label>
        <select id="storeSelect" name="storeSelect" required>
            <option value="" disabled selected>Select a Store</option>
        </select>

        <button id="placeOrderButton">Place Order</button>
    </section>
</main>

<script type="module" src="/public/js/dashboard.js"></script>